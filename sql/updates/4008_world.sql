-- Scripts
UPDATE creature_template SET ScriptName = "npc_chesspiece" WHERE entry IN (21726, 21748, 21747, 21750, 21752, 17469, 21160, 21664, 21682, 21684, 21683, 17211);
UPDATE creature_template SET ScriptName = "npc_echo_of_medivh", npcflag = npcflag | 0x1 WHERE entry = 16816;
UPDATE creature_template SET ScriptName = "chess_move_trigger" WHERE entry = 22519;
UPDATE creature_template SET flags_extra = flags_extra | 128 WHERE entry = 22519;
UPDATE creature_template SET regenhealth = 0 WHERE entry IN (21726, 21748, 21747, 21750, 21752, 17469, 21160, 21664, 21682, 21684, 21683, 17211);

-- Misc
DELETE FROM spell_script_target WHERE entry IN (30012, 37146, 37144, 37148, 37151, 37152, 37153, 30284);
INSERT INTO spell_script_target VALUES
(30012, 1, 22519),
(37146, 1, 22519),
(37144, 1, 22519),
(37148, 1, 22519),
(37151, 1, 22519),
(37152, 1, 22519),
(37153, 1, 22519),
(30284, 1, 22519);
UPDATE creature_model_info SET bounding_radius = 0.93, combat_reach = 3.75 WHERE modelid IN (16276, 16264, 5564, 19783, 16278, 16280, 16293, 16269, 16267, 2352, 16263, 16270);
UPDATE creature_template SET mindmg = 445, maxdmg = 909, attackpower = 4735 WHERE entry = 17211;
UPDATE creature_template SET mindmg = 445, maxdmg = 909, attackpower = 4735 WHERE entry = 21664;
UPDATE creature_template SET mindmg = 445, maxdmg = 909, attackpower = 4735 WHERE entry = 21682;
UPDATE creature_template SET mindmg = 445, maxdmg = 909, attackpower = 4735 WHERE entry = 21683;
UPDATE creature_template SET flags_extra = 130 WHERE entry = 22521;

DELETE FROM creature_template_addon WHERE entry = 22521;
INSERT INTO creature_template_addon (entry, auras) VALUES (22521, "39383 0");

-- Spells data
DELETE FROM spell_script_target WHERE entry IN (37476, 37472, 37461, 37454, 37502, 37428, 37413, 37471, 37474, 37459, 37453, 37498, 37427, 37406, 39384);
INSERT INTO spell_script_target VALUES (37476, 1, 17211), (37476, 1, 21160), (37476, 1, 21664), (37476, 1, 21682), (37476, 1, 21683), (37476, 1, 21684);
INSERT INTO spell_script_target VALUES (37472, 1, 17469), (37472, 1, 21726), (37472, 1, 21747), (37472, 1, 21748), (37472, 1, 21750);
INSERT INTO spell_script_target VALUES (37461, 1, 17211), (37461, 1, 21160), (37461, 1, 21664), (37461, 1, 21682), (37461, 1, 21683), (37461, 1, 21684);
INSERT INTO spell_script_target VALUES (37454, 1, 17211), (37454, 1, 21160), (37454, 1, 21664), (37454, 1, 21682), (37454, 1, 21683), (37454, 1, 21684);
INSERT INTO spell_script_target VALUES (37502, 1, 17211), (37502, 1, 21160), (37502, 1, 21664), (37502, 1, 21682), (37502, 1, 21683), (37502, 1, 21684);
INSERT INTO spell_script_target VALUES (37428, 1, 17211), (37428, 1, 21160), (37428, 1, 21664), (37428, 1, 21682), (37428, 1, 21683), (37428, 1, 21684);
INSERT INTO spell_script_target VALUES (37413, 1, 17211), (37413, 1, 21160), (37413, 1, 21664), (37413, 1, 21682), (37413, 1, 21683), (37413, 1, 21684);
INSERT INTO spell_script_target VALUES (37471, 1, 17211), (37471, 1, 21160), (37471, 1, 21664), (37471, 1, 21682), (37471, 1, 21683);
INSERT INTO spell_script_target VALUES (37474, 1, 17469), (37474, 1, 21726), (37474, 1, 21747), (37474, 1, 21748), (37474, 1, 21750), (37474, 1, 21752);
INSERT INTO spell_script_target VALUES (37459, 1, 17469), (37459, 1, 21726), (37459, 1, 21747), (37459, 1, 21748), (37459, 1, 21750), (37459, 1, 21752);
INSERT INTO spell_script_target VALUES (37453, 1, 17469), (37453, 1, 21726), (37453, 1, 21747), (37453, 1, 21748), (37453, 1, 21750), (37453, 1, 21752);
INSERT INTO spell_script_target VALUES (37498, 1, 17469), (37498, 1, 21726), (37498, 1, 21747), (37498, 1, 21748), (37498, 1, 21750), (37498, 1, 21752);
INSERT INTO spell_script_target VALUES (37427, 1, 17469), (37427, 1, 21726), (37427, 1, 21747), (37427, 1, 21748), (37427, 1, 21750), (37427, 1, 21752);
INSERT INTO spell_script_target VALUES (37406, 1, 17469), (37406, 1, 21726), (37406, 1, 21747), (37406, 1, 21748), (37406, 1, 21750), (37406, 1, 21752);
INSERT INTO spell_script_target VALUES (39384, 1, 17469), (39384, 1, 21726), (39384, 1, 21747), (39384, 1, 21748), (39384, 1, 21750), (39384, 1, 21752), (39384, 1, 17211), (39384, 1, 21160), (39384, 1, 21664), (39384, 1, 21682), (39384, 1, 21683), (39384, 1, 21684);

UPDATE spell_template SET effect1 = 128, durationIndex = 21, effectRadiusIndex1 = 33, effectImplicitTargetA1 = 58, areaId = 3457 WHERE id = 39331;

-- Echo of Medivh spawn
DELETE FROM creature WHERE id = 16816;
INSERT INTO creature VALUES ('', 16816, 532, 1, 0, 1512, -11100.9, -1851.23, 221.07, 5.36597, 25, 0, 0, 18000, 0, 0, 0, 0,'');

-- Spells
UPDATE creature_template SET spell1 = 37146, spell2 = 30284, spell3 = 37476, spell4 = 37472 WHERE entry = 21752;
UPDATE creature_template SET spell1 = 37146, spell2 = 30284, spell3 = 37406, spell4 = 37414 WHERE entry = 17211;
UPDATE creature_template SET spell1 = 37146, spell2 = 30284, spell3 = 37413, spell4 = 37416 WHERE entry = 17469;
UPDATE creature_template SET spell1 = 37146, spell2 = 30284, spell3 = 37427, spell4 = 37432 WHERE entry = 21160;
UPDATE creature_template SET spell1 = 37144, spell2 = 30284, spell3 = 37453, spell4 = 37498 WHERE entry = 21664;
UPDATE creature_template SET spell1 = 37146, spell2 = 30284, spell3 = 37459, spell4 = 37455 WHERE entry = 21682;
UPDATE creature_template SET spell1 = 37148, spell2 = 30284, spell3 = 37462, spell4 = 37465 WHERE entry = 21683;
UPDATE creature_template SET spell1 = 37146, spell2 = 30284, spell3 = 37474, spell4 = 37471 WHERE entry = 21684;
UPDATE creature_template SET spell1 = 37146, spell2 = 30284, spell3 = 37428, spell4 = 37434 WHERE entry = 21726;
UPDATE creature_template SET spell1 = 37146, spell2 = 30284, spell3 = 37461, spell4 = 37456 WHERE entry = 21747;
UPDATE creature_template SET spell1 = 37144, spell2 = 30284, spell3 = 37454, spell4 = 37502 WHERE entry = 21748;
UPDATE creature_template SET spell1 = 37148, spell2 = 30284, spell3 = 37463, spell4 = 37469 WHERE entry = 21750;

-- Spells implicit targets
UPDATE spell_template SET effectImplicitTargetA1 = 22 WHERE id = 37454;
UPDATE spell_template SET effectImplicitTargetA1 = 22 WHERE id = 37461;
UPDATE spell_template SET effectImplicitTargetB1 = 7 WHERE id IN (37454, 37461);
UPDATE spell_template SET effectImplicitTargetA1 = 22, effectImplicitTargetB1 = 7 WHERE id = 37502;
UPDATE spell_template SET effect2 = 0 WHERE id = 39384;

-- Triggers
DELETE FROM creature WHERE id = 22519;
INSERT INTO creature (id, map, position_x, position_y, position_z, spawntimesecs) VALUES
-- Row 1
(22519, 532, -11083.793945, -1903.423706, 220.7, 120),
(22519, 532, -11087.228516, -1899.100220, 220.7, 120),
(22519, 532, -11090.664062, -1894.776733, 220.7, 120),
(22519, 532, -11094.098633, -1890.453247, 220.7, 120),
(22519, 532, -11097.534180, -1886.129761, 220.7, 120),
(22519, 532, -11100.969727, -1881.806274, 220.7, 120),
(22519, 532, -11104.405273, -1877.482788, 220.7, 120),
(22519, 532, -11107.839844, -1873.159302, 220.7, 120),
 -- Row 2
(22519, 532, -11079.477539, -1899.985840, 220.7, 120),
(22519, 532, -11082.912109, -1895.662842, 220.7, 120),
(22519, 532, -11089.782227, -1887.016602, 220.7, 120),
(22519, 532, -11086.347656, -1891.339600, 220.7, 120),
(22519, 532, -11103.521484, -1869.724121, 220.7, 120),
(22519, 532, -11100.086914, -1874.047119, 220.7, 120),
(22519, 532, -11093.216797, -1882.693359, 220.7, 120),
(22519, 532, -11096.652344, -1878.370361, 220.7, 120),
-- Row 3
(22519, 532, -11075.160156, -1896.548096, 220.7, 120),
(22519, 532, -11078.595703, -1892.225342, 220.7, 120),
(22519, 532, -11085.464844, -1883.579834, 220.7, 120),
(22519, 532, -11082.029297, -1887.902588, 220.7, 120),
(22519, 532, -11099.203125, -1866.288574, 220.7, 120),
(22519, 532, -11095.768555, -1870.611328, 220.7, 120),
(22519, 532, -11088.898438, -1879.256836, 220.7, 120),
(22519, 532, -11092.333984, -1874.934082, 220.7, 120),
-- Row 4
(22519, 532, -11070.841797, -1893.110474, 220.7, 120),
(22519, 532, -11074.277344, -1888.788086, 220.7, 120),
(22519, 532, -11081.146484, -1880.143188, 220.7, 120),
(22519, 532, -11077.710938, -1884.465576, 220.7, 120),
(22519, 532, -11094.884766, -1862.853394, 220.7, 120),
(22519, 532, -11091.450195, -1867.175781, 220.7, 120),
(22519, 532, -11084.580078, -1875.820679, 220.7, 120),
(22519, 532, -11088.015625, -1871.498291, 220.7, 120),
-- Row 5
(22519, 532, -11066.525391, -1889.672607, 220.7, 120),
(22519, 532, -11069.960938, -1885.350586, 220.7, 120),
(22519, 532, -11076.830078, -1876.706299, 220.7, 120),
(22519, 532, -11073.394531, -1881.028442, 220.7, 120),
(22519, 532, -11090.566406, -1859.417969, 220.7, 120),
(22519, 532, -11087.132812, -1863.739990, 220.7, 120),
(22519, 532, -11080.263672, -1872.384277, 220.7, 120),
(22519, 532, -11083.699219, -1868.062134, 220.7, 120),
-- Row 6
(22519, 532, -11062.207031, -1886.234863, 220.7, 120),
(22519, 532, -11065.642578, -1881.913086, 220.7, 120),
(22519, 532, -11072.511719, -1873.269531, 220.7, 120),
(22519, 532, -11069.076172, -1877.591309, 220.7, 120),
(22519, 532, -11086.248047, -1855.982666, 220.7, 120),
(22519, 532, -11082.814453, -1860.304443, 220.7, 120),
(22519, 532, -11075.945312, -1868.947998, 220.7, 120),
(22519, 532, -11079.380859, -1864.626221, 220.7, 120),
-- Row 7
(22519, 532, -11057.890625, -1882.797363, 220.7, 120),
(22519, 532, -11061.324219, -1878.475830, 220.7, 120),
(22519, 532, -11068.193359, -1869.833008, 220.7, 120),
(22519, 532, -11064.759766, -1874.154419, 220.7, 120),
(22519, 532, -11081.929688, -1852.547119, 220.7, 120),
(22519, 532, -11078.496094, -1856.868652, 220.7, 120),
(22519, 532, -11071.626953, -1865.511475, 220.7, 120),
(22519, 532, -11075.062500, -1861.190063, 220.7, 120),
-- Row 8
(22519, 532, -11053.572266, -1879.359497, 220.7, 120),
(22519, 532, -11057.007812, -1875.038452, 220.7, 120),
(22519, 532, -11063.875000, -1866.396240, 220.7, 120),
(22519, 532, -11060.441406, -1870.717407, 220.7, 120),
(22519, 532, -11077.613281, -1849.111938, 220.7, 120),
(22519, 532, -11074.177734, -1853.432983, 220.7, 120),
(22519, 532, -11067.310547, -1862.075195, 220.7, 120),
(22519, 532, -11070.744141, -1857.754028, 220.7, 120);
